(function(v,x){typeof exports=="object"&&typeof module<"u"?x(exports,require("react/jsx-runtime"),require("react")):typeof define=="function"&&define.amd?define(["exports","react/jsx-runtime","react"],x):(v=typeof globalThis<"u"?globalThis:v||self,x(v.ReactFlexLayout={},v.React,v.React))})(this,(function(v,x,i){"use strict";const Se=({size:e=16,color:t="#666",className:n=""})=>x.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:n,children:[x.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),x.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),de=({node:e,index:t,onClose:n,onSelect:r,onDragStart:a,onDragEnd:c,className:l="",style:h={},closeIcon:u,closeButtonClassName:d=""})=>{const g=i.useRef(!1),y=i.useCallback(()=>{r?.(e.id)},[e.id,r]),S=i.useCallback(I=>{I.stopPropagation(),n?.(e.id)},[e.id,n]),$=i.useCallback(I=>{I.dataTransfer.setData("text/plain",e.id),I.dataTransfer.effectAllowed="move",I.currentTarget.classList.add("dragging"),document.body.classList.add("dragging"),g.current=!0,a?.(e.id,t)},[e.id,t,a]),E=i.useCallback(I=>{I.currentTarget.classList.remove("dragging"),document.body.classList.remove("dragging"),g.current=!1,c?.()},[c]);i.useEffect(()=>()=>{g.current&&(document.body.classList.remove("dragging"),g.current=!1)},[]);const W=i.useMemo(()=>({...h,cursor:"grab"}),[h]);return x.jsxs("div",{className:`react-flex-layout-tab ${l}`,style:W,onClick:y,draggable:!0,onDragStart:$,onDragEnd:E,children:[x.jsx("span",{className:"react-flex-layout-tab-title",children:e.name||"Untitled"}),x.jsx("button",{className:`react-flex-layout-tab-close ${d}`.trim(),onClick:S,type:"button","aria-label":"Close tab",children:u||x.jsx(Se,{})})]})},ve=({node:e,children:t,factory:n,onTabSelect:r,onTabClose:a,onTabDragStart:c,onTabDragEnd:l,onDragOver:h,onDragLeave:u,onDrop:d,dragOverTabset:g,dropPosition:y,dropTargetIndex:S,direction:$="ltr",className:E="",style:W={},closeIcon:I,closeButtonClassName:w})=>{const f=i.useMemo(()=>e.children?.filter(L=>L.type==="tab")||[],[e.children]),b=i.useMemo(()=>{const L=new Map;for(let T=0;T<f.length;T++){const j=f[T];j&&j.id&&L.set(j.id,T)}return L},[f]),C=i.useMemo(()=>$==="rtl"?[...f].reverse():f,[f,$]),z=e.selected??0,D=Math.min(z,Math.max(0,f.length-1)),m=f[D],k=i.useCallback(L=>{const T=b.get(L);T!==void 0&&T!==-1&&r?.(e.id,T)},[e.id,b,r]),P=i.useCallback(L=>{const T=b.get(L);T!==void 0&&T!==-1&&a?.(e.id,T)},[e.id,b,a]),q=i.useCallback((L,T)=>{const j=T!==void 0?T:b.get(L)??-1;j!==-1&&c?.(e.id,j)},[e.id,b,c]),ee=i.useRef(null),H=i.useCallback(L=>{L.preventDefault(),L.dataTransfer.dropEffect="move";const T=L.currentTarget.getBoundingClientRect(),j=L.clientX-T.left,Q=L.clientY-T.top,ue=T.width,se=T.height;let s="center";if(Q<40){const R=ee.current;if(R){const o=R.getBoundingClientRect(),V=L.clientX-o.left,K=R.querySelectorAll(".react-flex-layout-tab");let J=f.length;if($==="rtl"){for(let p=K.length-1;p>=0;p--){const A=K[p].getBoundingClientRect(),F=A.left-o.left,le=A.right-o.left,Z=(F+le)/2;if(V>Z){const B=b.get(C[p].id);B!==void 0&&B!==-1&&(J=B);break}}if(J===f.length&&K.length>0){const p=K[0].getBoundingClientRect();if(V>p.right-o.left){const A=b.get(C[0].id);A!==void 0&&A!==-1&&(J=A)}}}else for(let p=0;p<K.length;p++){const A=K[p].getBoundingClientRect(),F=A.left-o.left,le=A.right-o.left,Z=(F+le)/2;if(V<Z){const B=b.get(C[p].id);B!==void 0&&B!==-1&&(J=B);break}}s="tab",h?.(L,e.id,s,J);return}}j<ue*.25?s="left":j>ue*.75?s="right":Q<se*.25?s="top":Q>se*.75?s="bottom":s="center",h?.(L,e.id,s)},[e.id,$,f.length,C,b,h]),O=i.useCallback(L=>{u?.(L)},[u]),_=i.useCallback(L=>{d?.(L,e.id)},[e.id,d]),N=g===e.id,U={...W,width:e.width?`${e.width}%`:void 0,height:e.height?`${e.height}%`:void 0,flex:`${e.flex||1} 1 0%`,minWidth:e.minWidth?`${e.minWidth}px`:void 0,minHeight:e.minHeight?`${e.minHeight}px`:void 0,maxWidth:e.maxWidth?`${e.maxWidth}px`:void 0,maxHeight:e.maxHeight?`${e.maxHeight}px`:void 0};return f.length===0?null:x.jsxs("div",{className:`react-flex-layout-tabset ${N?"drag-over":""} ${E}`,style:U,"data-drop-position":N?y:void 0,onDragOver:H,onDragLeave:O,onDrop:_,children:[x.jsxs("div",{className:"react-flex-layout-tabset-header",ref:ee,children:[C.map(L=>{const T=b.get(L.id)??-1,j=T===D,Q=N&&y==="tab"&&S!==null&&T===S;return x.jsxs(i.Fragment,{children:[Q&&x.jsx("div",{className:"react-flex-layout-tab-drop-indicator"}),x.jsx(de,{node:L,index:T,onSelect:k,onClose:P,onDragStart:q,onDragEnd:l,className:j?"active":"",closeIcon:I,closeButtonClassName:w})]},L.id)}),N&&y==="tab"&&S!==null&&S===f.length&&x.jsx("div",{className:"react-flex-layout-tab-drop-indicator"})]}),x.jsx("div",{className:"react-flex-layout-tabset-content",children:m&&(n?n(m):t)})]})},fe=i.memo(ve,(e,t)=>{if(e.className!==t.className||e.direction!==t.direction||e.dragOverTabset!==t.dragOverTabset||e.dropPosition!==t.dropPosition||e.dropTargetIndex!==t.dropTargetIndex||e.factory!==t.factory||e.onTabSelect!==t.onTabSelect||e.onTabClose!==t.onTabClose||e.onTabDragStart!==t.onTabDragStart||e.onTabDragEnd!==t.onTabDragEnd||e.onDragOver!==t.onDragOver||e.onDragLeave!==t.onDragLeave||e.onDrop!==t.onDrop||e.closeIcon!==t.closeIcon||e.closeButtonClassName!==t.closeButtonClassName||e.style!==t.style||e.children!==t.children)return!1;if(e.node!==t.node){if(e.node.id!==t.node.id||e.node.selected!==t.node.selected||e.node.width!==t.node.width||e.node.height!==t.node.height||e.node.flex!==t.node.flex||e.node.minWidth!==t.node.minWidth||e.node.minHeight!==t.node.minHeight||e.node.maxWidth!==t.node.maxWidth||e.node.maxHeight!==t.node.maxHeight)return!1;const n=e.node.children||[],r=t.node.children||[];if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++)if(n[a]!==r[a]){const c=n[a],l=r[a];if(c.id!==l.id||c.type!==l.type||c.name!==l.name||c.component!==l.component||c.enableClose!==l.enableClose||c.enableDrag!==l.enableDrag)return!1}}return!0});fe.displayName="MemoizedTabSet";const he=({direction:e,onResize:t,onResizeStart:n,size:r=8,className:a="",style:c={},customStyles:l={}})=>{const[h,u]=i.useState(!1),d=i.useRef(0),g=i.useRef(0),y=i.useRef(!1),S=i.useRef(null),$=i.useRef(null),E=i.useCallback(f=>{f.preventDefault(),f.stopPropagation(),u(!0),d.current=e==="horizontal"?f.clientX:f.clientY,g.current=d.current,n?.();const b=z=>{g.current=e==="horizontal"?z.clientX:z.clientY,y.current||(y.current=!0,requestAnimationFrame(()=>{y.current=!1;const D=g.current-d.current;t(D)}))},C=()=>{u(!1),document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",C),S.current=null,$.current=null,y.current=!1};document.addEventListener("mousemove",b),document.addEventListener("mouseup",C),S.current=b,$.current=C},[e,t,n]),W={backgroundColor:"#ffffff",border:"none",outline:"none"},I=i.useMemo(()=>h&&l.active?l.active:l.default?l.default:W,[h,l.active,l.default]),w=i.useMemo(()=>{const f=e==="horizontal";return{...c,width:f?`${r}px`:"100%",height:f?"100%":`${r}px`,minWidth:f?`${r}px`:void 0,minHeight:f?void 0:`${r}px`,flexShrink:0,cursor:f?"col-resize":"row-resize",...I,transition:h?"none":"all 0.2s ease"}},[e,r,c,I,h]);return i.useEffect(()=>()=>{S.current&&document.removeEventListener("mousemove",S.current),$.current&&document.removeEventListener("mouseup",$.current),y.current=!1},[]),x.jsx("div",{className:`react-flex-layout-splitter ${a}`,style:w,onMouseDown:E})},He=(e,t)=>({global:{enableClose:!0,enableDrag:!0,enableResize:!0,splitterSize:8,tabOverlapLength:0,direction:"ltr",...t},layout:e}),Te=(e,t,n,r)=>({id:e,type:"tab",component:t,name:n,config:r,enableClose:!0,enableDrag:!0}),ge=(e,t,n=0)=>({id:e,type:"tabset",children:t,selected:n,enableClose:!0,enableDrag:!0}),xe=(e,t,n,r)=>({id:e,type:"row",children:me(t),width:n,height:r,enableResize:!0}),Ce=(e,t,n,r)=>({id:e,type:"column",children:me(t),width:n,height:r,enableResize:!0}),X=(e,t)=>{if(e.id===t)return e;if(e.children)for(const n of e.children){const r=X(n,t);if(r)return r}return null},De=(e,t)=>{if(!e.children)return null;for(const n of e.children)if(n.id===t)return e;for(const n of e.children){const r=De(n,t);if(r)return r}return null},M=(e,t,n)=>{if(e.id===t)return n===null?null:Object.keys(n).some(a=>e[a]!==n[a])?{...e,...n}:e;if(e.children){let r=null;const a=e.children;for(let c=0;c<a.length;c++){const l=a[c],h=M(l,t,n);h!==l&&r===null&&(r=a.slice(0,c)),r!==null&&h!==null&&r.push(h)}return r===null?e:{...e,children:r}}return e},be=(e,t)=>{if(!e.children)return e;let n=null;const r=e.children;for(let a=0;a<r.length;a++){const c=r[a];if(c.id===t){n===null&&(n=r.slice(0,a));continue}const l=be(c,t);l!==c&&n===null&&(n=r.slice(0,a)),n!==null&&n.push(l)}return n===null?e:{...e,children:n}},me=e=>e.map(t=>({...t,flex:t.flex||1/e.length})),re=e=>{if(e.type==="tabset"&&(!e.children||e.children.length===0))return null;if(e.children){const t=e.children,n=t.length;let r=null;for(let l=0;l<t.length;l++){const h=t[l],u=re(h);u!==h&&r===null&&(r=t.slice(0,l)),r!==null&&u!==null&&r.push(u)}const a=r??t,c=a.length<n;if(a.length===0)return null;if((e.type==="row"||e.type==="column")&&a.length>0){const l=a.reduce((u,d)=>u+(d.flex||0),0);if(c||l<.999||a.length===1){let u;if(a.length===1)u=a.map(d=>({...d,flex:1}));else if(l===0||l<.001){const d=1/a.length;u=a.map(g=>({...g,flex:d}))}else{const d=1/l;u=a.map(g=>({...g,flex:(g.flex||0)*d}))}return{...e,children:u}}if(a.length!==n||a.some((u,d)=>u!==t[d]))return{...e,children:a}}if(r!==null)return{...e,children:a}}return e},Le=(e,t,n=null)=>{if(!e.children)return null;for(const r of e.children){if(r.id===t)return n||e;if(r.children){const a=Le(r,t,e);if(a)return a}}return null},Ie=(e,t)=>{if(!e.children)return null;for(const n of e.children){if(n.type==="tabset"&&n.children&&n.children.find(a=>a.id===t))return n;if(n.children){const r=Ie(n,t);if(r)return r}}return null},we=(e,t,n)=>{const r=X(e,t);if(!r||r.type!=="tabset")return null;const c=[...r.children||[],n],l={...r,children:c,selected:c.length-1};return M(e,t,l)},Oe=(e,t)=>{const n=Ie(e,t);if(!n||n.type!=="tabset")return{layout:e,restoreData:null};const r=n.children?.find(y=>y.id===t);if(!r||r.type!=="tab")return{layout:e,restoreData:null};const a=n.children?.findIndex(y=>y.id===t),c=n.children?.filter(y=>y.id!==t);if(!c||c.length===0){const y=be(e,n.id),S={tabId:r.id,component:r.component||"",name:r.name||"",tabsetId:n.id,tabIndex:a!==void 0?a:0,config:r.config};return{layout:y,restoreData:S}}const l=n.selected??0;let h=l;a!==void 0&&a!==-1&&(a<=l&&(h=Math.max(0,l-1)),h=Math.min(h,c.length-1));const u={...n,children:c,selected:c.length>0?h:void 0},d=M(e,n.id,u),g={tabId:r.id,component:r.component||"",name:r.name||"",tabsetId:n.id,tabIndex:a!==void 0?a:0,config:r.config};return{layout:d,restoreData:g}},pe=(e,t,n)=>{if(X(e,t.tabId))return e;let a=X(e,t.tabsetId);if(!a||a.type!=="tabset"){if(!n)return null;const h=Le(n,t.tabsetId);if(!h)return null;const u=X(e,h.id);if(!u||!u.children)return null;const d=u.children.find(g=>g.id===t.tabsetId);if(d)a=d;else{const g=ge(t.tabsetId,[]),y=[...u.children,g],S={...u,children:y},$=M(e,u.id,S);if(!$||(e=$,a=X(e,t.tabsetId),!a||a.type!=="tabset"))return null}}const c=Te(t.tabId,t.component,t.name,t.config);return we(e,t.tabsetId,c)},We=(e,t)=>X(e,t)!==null,Ae=(e,t)=>{const n=i.useRef({}),r=i.useRef({}),a=i.useCallback((l,h,u)=>{if(!t)return;const d=Ne(e.layout,l);if(!d||!d.children)return;const g=d.children.findIndex(D=>D.id===l),y=g+1;if(y>=d.children.length)return;const S=`${l}-${u}`;if(!n.current[S]){const D=d.children[g],m=d.children[y];n.current[S]={current:D.flex||1,sibling:m.flex||1}}const $=n.current[S],E=$.current+$.sibling,W=u==="horizontal"?window.innerWidth:window.innerHeight,I=$.current/E*W,w=$.sibling/E*W,f=100;let b=I+h,C=w-h;if(b<f){const D=f-b;b=f,C-=D}if(C<f){const D=f-C;C=f,b-=D}const z=b+C;if(z>0){const D=b/z*E,m=C/z*E,k=r.current[S],P=1e-4;if(k&&Math.abs(k.current-D)<P&&Math.abs(k.sibling-m)<P)return;const q=d.children.slice(),ee=q[g],H=q[y];q[g]={...ee,flex:D},q[y]={...H,flex:m};const O=M(e.layout,d.id,{children:q});O&&(r.current[S]={current:D,sibling:m},t({...e,layout:O}))}},[e,t]),c=i.useCallback((l,h)=>{const u=`${l}-${h}`;delete n.current[u],delete r.current[u]},[]);return{handleResize:a,resetResize:c}},Ne=(e,t)=>{if(!e.children)return null;for(const n of e.children){if(n.id===t)return e;const r=Ne(n,t);if(r)return r}return null},Fe=(e,t)=>{const[n,r]=i.useState(null),[a,c]=i.useState(null),[l,h]=i.useState("center"),[u,d]=i.useState(null),g=i.useRef(null),y=i.useCallback((I,w)=>{const f={tabsetId:I,tabIndex:w};r(f),g.current=f},[]),S=i.useCallback(()=>{r(null),g.current=null,c(null),d(null)},[]),$=i.useCallback((I,w,f="center",b)=>{I.preventDefault(),I.dataTransfer.dropEffect="move",c(w),h(f),b!==void 0?d(b):f!=="tab"&&d(null)},[]),E=i.useCallback(I=>{I.currentTarget===I.target&&setTimeout(()=>{c(null),d(null)},50)},[]),W=i.useCallback((I,w)=>{I.preventDefault();const f=g.current;if(!f||!t)return;const{tabsetId:b,tabIndex:C}=f;if(b===w&&l==="tab"&&u!==null){const H=X(e.layout,b);if(!H||!H.children)return;const O=H.children[C];if(!O||C===u)return;const _=[...H.children];_.splice(C,1),_.splice(u,0,O);let N=H.selected??0;C<N&&u>=N?N=Math.max(0,N-1):C>N&&u<=N?N=Math.min(N+1,_.length-1):C===N&&(N=u);const U=M(e.layout,b,{children:_,selected:N});U&&t({...e,layout:U,metadata:e.metadata}),r(null),c(null),d(null);return}if(b===w&&l!=="tab")return;const z=X(e.layout,b),D=X(e.layout,w);if(!z||!D||!z.children||!D.children)return;const m=z.children[C];if(!m)return;let k=e.layout;const P=z.children.filter((H,O)=>O!==C),q=M(k,b,{children:P,selected:Math.min(z.selected||0,P.length-1)});if(!q)return;if(k=q,l==="center"){const H=M(k,w,{children:[...D.children||[],m],selected:D.children?.length||0});if(!H)return;k=H}else{const H=ge(`${w}-split-${Date.now()}`,[m]),O=De(k,w);if(O){const _=O.children?.findIndex(N=>N.id===w)||0;if(l==="left"||l==="right"){const N=xe(`${w}-row-${Date.now()}`,[l==="left"?H:D,l==="left"?D:H]),U=M(k,O.id,{children:[...O.children?.slice(0,_)||[],N,...O.children?.slice(_+1)||[]]});if(!U)return;k=U}else if(l==="top"||l==="bottom"){const N=Ce(`${w}-column-${Date.now()}`,[l==="top"?H:D,l==="top"?D:H]),U=M(k,O.id,{children:[...O.children?.slice(0,_)||[],N,...O.children?.slice(_+1)||[]]});if(!U)return;k=U}}}const ee=re(k);ee&&t({...e,layout:ee,metadata:e.metadata}),r(null),c(null)},[e,t,l,u]);return{draggedTab:n,dragOverTabset:a,dropPosition:l,dropTargetIndex:u,handleDragStart:y,handleDragEnd:S,handleDragOver:$,handleDragLeave:E,handleDrop:W}},Be="react-flex-layout";class ye{storageKey;autoSave;debounceMs;saveTimeout=null;lastSavedString=null;isAvailable;constructor(t={}){this.storageKey=`${Be}-${t.key||"default"}`,this.autoSave=t.autoSave!==!1,this.debounceMs=t.debounceMs||500,this.isAvailable=$e()}save(t){if(this.isAvailable)try{const n=JSON.stringify(t);if(n===this.lastSavedString)return;localStorage.setItem(this.storageKey,n),this.lastSavedString=n}catch{}}load(){if(!this.isAvailable)return null;try{const t=localStorage.getItem(this.storageKey);if(t)return this.lastSavedString=t,JSON.parse(t)}catch{}return null}clear(){if(this.isAvailable)try{localStorage.removeItem(this.storageKey),this.lastSavedString=null}catch{}}exists(){return this.isAvailable?localStorage.getItem(this.storageKey)!==null:!1}debouncedSave(t){this.autoSave&&this.isAvailable&&(this.saveTimeout&&clearTimeout(this.saveTimeout),this.saveTimeout=setTimeout(()=>{this.save(t)},this.debounceMs))}getStorageKey(){return this.storageKey}isAutoSaveEnabled(){return this.autoSave}cancel(){this.saveTimeout&&(clearTimeout(this.saveTimeout),this.saveTimeout=null)}}const Me=e=>new ye(e),$e=()=>{try{const e="__localStorage_test__";return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch{return!1}},ke=(e,t={})=>{const{onLoad:n,onSave:r,onError:a,...c}=t,l=i.useRef(null),[h,u]=i.useState(e),[d,g]=i.useState(!1),[y,S]=i.useState(!1);i.useEffect(()=>{if(l.current)try{l.current.cancel?.()}catch{}l.current=new ye(c),S(!0)},[c.key,c.autoSave,c.debounceMs]),i.useEffect(()=>{if(!l.current||d)return;const m=l.current.load();m?(u(m),g(!0),n?.(m)):g(!0)},[d,n]);const $=i.useRef(),E=i.useMemo(()=>JSON.stringify(h.layout),[h.layout]),W=i.useMemo(()=>JSON.stringify(e.layout),[e.layout]),I=i.useMemo(()=>h.metadata?JSON.stringify(h.metadata):void 0,[h.metadata]),w=i.useMemo(()=>e.metadata?JSON.stringify(e.metadata):void 0,[e.metadata]);i.useEffect(()=>{if(!(!d||!l.current)){if($.current!==W&&E!==W){const m={...e};e.global&&(m.global={...e.global}),u(m),$.current=W,l.current.isAutoSaveEnabled()?l.current.debouncedSave(m):l.current.save(m);return}e.metadata&&I!==w&&u(m=>({...m,metadata:e.metadata}))}},[d,l,e,E,W,I,w]);const f=i.useCallback(m=>{if(l.current)try{l.current.isAutoSaveEnabled()?l.current.debouncedSave(m):l.current.save(m),r?.(m)}catch(k){a?.(k)}},[r,a]),b=i.useCallback(m=>{const k={...m};m.global&&(k.global={...m.global}),u(k),f(k)},[f]),C=i.useCallback(()=>{if(l.current)try{l.current.clear()}catch(m){a?.(m)}},[a]),z=i.useCallback(()=>l.current?.exists()??!1,[]),D=i.useCallback(()=>l.current?.getStorageKey()??"",[]);return{model:h,updateModel:b,clearStorage:C,hasStoredData:z,getStorageKey:D,isLoaded:d,hasStorage:y}},Ee=i.forwardRef(({model:e,factory:t,onModelChange:n,onAction:r,className:a="",style:c={},storage:l,closeIcon:h,closeButtonClassName:u},d)=>{const[g,y]=i.useState(e),[S,$]=i.useState(null),{model:E,updateModel:W,isLoaded:I}=ke(e,{key:l?.key,autoSave:l?.autoSave,debounceMs:l?.debounceMs,onLoad:s=>{n?n(s):y(s)}}),w=l?.enabled?E:n?e:g,f=i.useCallback(s=>{l?.enabled?(W(s),n&&n(s)):n?n(s):y(s)},[n,l?.enabled,W]),{handleResize:b,resetResize:C}=Ae(w,f),{dragOverTabset:z,dropPosition:D,dropTargetIndex:m,handleDragStart:k,handleDragEnd:P,handleDragOver:q,handleDragLeave:ee,handleDrop:H}=Fe(w,f),O=i.useRef(E);i.useEffect(()=>{O.current=E},[E]);const _=i.useRef(g);i.useEffect(()=>{_.current=g},[g]);const N=i.useCallback(s=>{if(l?.enabled){const Y=O.current;if(s.type==="changeDirection"){const{direction:o}=s.payload;$(o)}const R=(o=>{switch(s.type){case"selectTab":const{nodeId:V,tabIndex:K}=s.payload,J=M(o.layout,V,{selected:K});return!J||J===o.layout?o:{...o,layout:J};case"removeNode":const{nodeId:p,tabIndex:A}=s.payload,F=X(o.layout,p);if(F&&F.children){const G=F.children.filter((ce,Ke)=>Ke!==A),te=F.selected??0;let ie=te;A<=te&&(ie=Math.max(0,te-1)),ie=Math.min(ie,G.length-1);const oe={...F,children:G,selected:G.length>0?ie:void 0},ae=M(o.layout,p,oe);if(ae){const ce=re(ae);if(ce)return{...o,layout:ce}}}return o;case"closeTabset":const{nodeId:le}=s.payload,Z=M(o.layout,le,null);if(Z){const G=re(Z);if(G)return{...o,layout:G}}return o;case"changeDirection":const{direction:B}=s.payload;return{...o,global:{...o.global,direction:B}};default:return o}})(Y);W(R),n&&n(R),r?.(s)}else r?.(s);if(!l?.enabled&&!n){const Y=_.current,R=(o=>{switch(s.type){case"selectTab":const{nodeId:V,tabIndex:K}=s.payload,J=M(o.layout,V,{selected:K});return!J||J===o.layout?o:{...o,layout:J};case"removeNode":const{nodeId:p,tabIndex:A}=s.payload,F=X(o.layout,p);if(F&&F.children){const B=F.children.filter((ae,ce)=>ce!==A),G=F.selected??0;let te=G;A<=G&&(te=Math.max(0,G-1)),te=Math.min(te,B.length-1);const ie={...F,children:B,selected:B.length>0?te:void 0},oe=M(o.layout,p,ie);if(oe){const ae=re(oe);if(ae)return{...o,layout:ae}}}return o;case"closeTabset":const{nodeId:le}=s.payload,Z=M(o.layout,le,null);if(Z){const B=re(Z);if(B)return{...o,layout:B}}return o;default:return o}})(Y);y(R)}},[r,n,l?.enabled,W]);i.useImperativeHandle(d,()=>({handleAction:N}),[N]);const U=i.useCallback((s,Y)=>{N({type:"selectTab",payload:{nodeId:s,tabIndex:Y}})},[N]),L=i.useCallback((s,Y)=>{N({type:"removeNode",payload:{nodeId:s,tabIndex:Y}})},[N]);let T;l?.enabled?S!==null?T=S:T=E?.global?.direction||"ltr":T=w.global?.direction||"ltr";const j=w.global?.splitterSize||8,Q=i.useCallback(s=>{switch(s.type){case"tabset":return x.jsx(fe,{node:s,factory:t,onTabSelect:U,onTabClose:L,onTabDragStart:k,onTabDragEnd:P,onDragOver:q,onDragLeave:ee,onDrop:H,dragOverTabset:z,dropPosition:z===s.id?D:void 0,dropTargetIndex:z===s.id?m:void 0,direction:T,closeIcon:h,closeButtonClassName:u},s.id);case"row":const Y=T==="rtl",ne=s.children||[],R=Y?[...ne].reverse():ne;return x.jsx("div",{className:"react-flex-layout-row",style:{width:s.width?`${s.width}%`:void 0,height:s.height?`${s.height}%`:void 0,flex:`${s.flex||1} 1 0%`,minWidth:s.minWidth?`${s.minWidth}px`:void 0,minHeight:s.minHeight?`${s.minHeight}px`:void 0,maxWidth:s.maxWidth?`${s.maxWidth}px`:void 0,maxHeight:s.maxHeight?`${s.maxHeight}px`:void 0},children:R.map((o,V)=>{const K=V+1;if(!(K<R.length))return x.jsx(i.Fragment,{children:Q(o)},o.id);const p=Y?ne.length-1-V:V,A=Y?ne.length-1-K:K,F=Math.min(p,A);if(Math.max(p,A)!==F+1)return x.jsx(i.Fragment,{children:Q(o)},o.id);const Z=ne[F],B=Y&&p>A;return x.jsxs(i.Fragment,{children:[Q(o),x.jsx(he,{direction:"horizontal",onResize:G=>{const te=B?-G:G;b(Z.id,te,"horizontal")},onResizeStart:()=>{C(Z.id,"horizontal")},size:j})]},o.id)})},s.id);case"column":return x.jsx("div",{className:"react-flex-layout-column",style:{width:s.width?`${s.width}%`:void 0,height:s.height?`${s.height}%`:void 0,flex:`${s.flex||1} 1 0%`,minWidth:s.minWidth?`${s.minWidth}px`:void 0,minHeight:s.minHeight?`${s.minHeight}px`:void 0,maxWidth:s.maxWidth?`${s.maxWidth}px`:void 0,maxHeight:s.maxHeight?`${s.maxHeight}px`:void 0},children:s.children?.map((o,V)=>x.jsxs(i.Fragment,{children:[Q(o),V<(s.children?.length||0)-1&&x.jsx(he,{direction:"vertical",onResize:K=>b(o.id,K,"vertical"),onResizeStart:()=>{C(o.id,"vertical")},size:j})]},o.id))},s.id);case"tab":return t(s);default:return null}},[T,j,t,U,L,b,k,P,q,ee,H,z,D,h,u]);i.useEffect(()=>{!l?.enabled&&S!==null&&$(null)},[l?.enabled,S]),i.useEffect(()=>{l?.enabled&&S!==null&&(E?.global?.direction||"ltr")===S&&$(null)},[l?.enabled,S,E?.global?.direction]);const ue=i.useMemo(()=>Q(w.layout),[Q,w.layout]),se={...c,height:"100%",width:"100%"};return l?.enabled&&!I?x.jsx("div",{className:`react-flex-layout ${a}`,style:{...se,display:"flex",alignItems:"center",justifyContent:"center"},children:x.jsx("div",{children:"Loading layout..."})}):x.jsx("div",{className:`react-flex-layout ${a}`,style:se,dir:T,children:ue})});Ee.displayName="Layout";const ze=i.memo(de,(e,t)=>!(e.className!==t.className||e.style!==t.style||e.closeIcon!==t.closeIcon||e.closeButtonClassName!==t.closeButtonClassName||e.index!==t.index||e.onSelect!==t.onSelect||e.onClose!==t.onClose||e.onDragStart!==t.onDragStart||e.onDragEnd!==t.onDragEnd||e.node.id!==t.node.id||e.node.name!==t.node.name));ze.displayName="MemoizedTab",v.DefaultCloseIcon=Se,v.Layout=Ee,v.LayoutStorage=ye,v.MemoizedTab=ze,v.MemoizedTabSet=fe,v.Splitter=he,v.Tab=de,v.TabSet=ve,v.addTabToTabset=we,v.calculateFlexValues=me,v.createColumn=Ce,v.createLayoutModel=He,v.createLayoutStorage=Me,v.createRow=xe,v.createTab=Te,v.createTabSet=ge,v.findNodeById=X,v.isLocalStorageAvailable=$e,v.removeEmptyTabsets=re,v.removeNodeById=be,v.removeTab=Oe,v.restoreTab=pe,v.tabExists=We,v.updateNodeById=M,v.useLayoutStorage=ke,Object.defineProperty(v,Symbol.toStringTag,{value:"Module"})}));
