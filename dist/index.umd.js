(function(T,C){typeof exports=="object"&&typeof module<"u"?C(exports,require("react/jsx-runtime"),require("react")):typeof define=="function"&&define.amd?define(["exports","react/jsx-runtime","react"],C):(T=typeof globalThis<"u"?globalThis:T||self,C(T.ReactFlexLayout={},T.React,T.React))})(this,(function(T,C,n){"use strict";const Ie=({size:e=16,color:t="#666",className:r=""})=>C.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:r,children:[C.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),C.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),be=({node:e,index:t,onClose:r,onSelect:l,onDragStart:a,onDragEnd:u,className:i="",style:g={},closeIcon:o,closeButtonClassName:f=""})=>{const b=n.useRef(!1),m=n.useCallback(()=>{l?.(e.id)},[e.id,l]),y=n.useCallback(k=>{k.stopPropagation(),r?.(e.id)},[e.id,r]),w=n.useCallback(k=>{k.dataTransfer.setData("text/plain",e.id),k.dataTransfer.effectAllowed="move",k.currentTarget.classList.add("dragging"),document.body.classList.add("dragging"),b.current=!0,a?.(e.id,t)},[e.id,t,a]),$=n.useCallback(k=>{k.currentTarget.classList.remove("dragging"),document.body.classList.remove("dragging"),b.current=!1,u?.()},[u]);n.useEffect(()=>()=>{b.current&&(document.body.classList.remove("dragging"),b.current=!1)},[]);const O=n.useMemo(()=>({...g,cursor:"grab"}),[g]);return C.jsxs("div",{className:`react-flex-layout-tab ${i}`,style:O,onClick:m,draggable:!0,onDragStart:w,onDragEnd:$,children:[C.jsx("span",{className:"react-flex-layout-tab-title",children:e.name||"Untitled"}),C.jsx("button",{className:`react-flex-layout-tab-close ${f}`.trim(),onClick:y,type:"button","aria-label":"Close tab",children:o||C.jsx(Ie,{})})]})},Le=({node:e,children:t,factory:r,onTabSelect:l,onTabClose:a,onTabDragStart:u,onTabDragEnd:i,onDragOver:g,onDragLeave:o,onDrop:f,dragOverTabset:b,dropPosition:m,dropTargetIndex:y,direction:w="ltr",className:$="",style:O={},closeIcon:k,closeButtonClassName:B})=>{const d=n.useMemo(()=>e.children?.filter(v=>v.type==="tab")||[],[e.children]),D=n.useMemo(()=>{const v=new Map;for(let L=0;L<d.length;L++){const A=d[L];A&&A.id&&v.set(A.id,L)}return v},[d]),x=n.useMemo(()=>w==="rtl"?[...d].reverse():d,[d,w]),E=e.selected??0,I=Math.min(E,Math.max(0,d.length-1)),h=d[I],p=n.useCallback(v=>{const L=D.get(v);L!==void 0&&L!==-1&&l?.(e.id,L)},[e.id,D,l]),M=n.useCallback(v=>{const L=D.get(v);L!==void 0&&L!==-1&&a?.(e.id,L)},[e.id,D,a]),j=n.useCallback((v,L)=>{const A=L!==void 0?L:D.get(v)??-1;A!==-1&&u?.(e.id,A)},[e.id,D,u]),Y=n.useRef(null),X=n.useCallback(v=>{v.preventDefault(),v.dataTransfer.dropEffect="move";const L=v.currentTarget.getBoundingClientRect(),A=v.clientX-L.left,N=v.clientY-L.top,W=L.width,U=L.height;let S="center";if(N<40){const de=Y.current;if(de){const re=de.getBoundingClientRect(),s=v.clientX-re.left,z=de.querySelectorAll(".react-flex-layout-tab");let _=d.length;if(w==="rtl"){for(let H=z.length-1;H>=0;H--){const c=z[H].getBoundingClientRect(),P=c.left-re.left,ee=c.right-re.left,te=(P+ee)/2;if(s>te){const K=D.get(x[H].id);K!==void 0&&K!==-1&&(_=K);break}}if(_===d.length&&z.length>0){const H=z[0].getBoundingClientRect();if(s>H.right-re.left){const c=D.get(x[0].id);c!==void 0&&c!==-1&&(_=c)}}}else for(let H=0;H<z.length;H++){const c=z[H].getBoundingClientRect(),P=c.left-re.left,ee=c.right-re.left,te=(P+ee)/2;if(s<te){const K=D.get(x[H].id);K!==void 0&&K!==-1&&(_=K);break}}S="tab",g?.(v,e.id,S,_);return}}A<W*.25?S="left":A>W*.75?S="right":N<U*.25?S="top":N>U*.75?S="bottom":S="center",g?.(v,e.id,S)},[e.id,w,d.length,x,D,g]),Q=n.useCallback(v=>{o?.(v)},[o]),Z=n.useCallback(v=>{f?.(v,e.id)},[e.id,f]),ne=b===e.id,q={...O,width:e.width?`${e.width}%`:void 0,height:e.height?`${e.height}%`:void 0,flex:`${e.flex||1} 1 0%`,minWidth:e.minWidth?`${e.minWidth}px`:void 0,minHeight:e.minHeight?`${e.minHeight}px`:void 0,maxWidth:e.maxWidth?`${e.maxWidth}px`:void 0,maxHeight:e.maxHeight?`${e.maxHeight}px`:void 0};return d.length===0?null:C.jsxs("div",{className:`react-flex-layout-tabset ${ne?"drag-over":""} ${$}`,style:q,"data-drop-position":ne?m:void 0,onDragOver:X,onDragLeave:Q,onDrop:Z,children:[C.jsxs("div",{className:"react-flex-layout-tabset-header",ref:Y,children:[x.map(v=>{const L=D.get(v.id)??-1,A=L===I,N=ne&&m==="tab"&&y!==null&&L===y;return C.jsxs(n.Fragment,{children:[N&&C.jsx("div",{className:"react-flex-layout-tab-drop-indicator"}),C.jsx(be,{node:v,index:L,onSelect:p,onClose:M,onDragStart:j,onDragEnd:i,className:A?"active":"",closeIcon:k,closeButtonClassName:B})]},v.id)}),ne&&m==="tab"&&y!==null&&y===d.length&&C.jsx("div",{className:"react-flex-layout-tab-drop-indicator"})]}),C.jsx("div",{className:"react-flex-layout-tabset-content",children:h&&(r?r(h):t)})]})},me=n.memo(Le,(e,t)=>{if(e.className!==t.className||e.direction!==t.direction||e.dragOverTabset!==t.dragOverTabset||e.dropPosition!==t.dropPosition||e.dropTargetIndex!==t.dropTargetIndex||e.factory!==t.factory||e.onTabSelect!==t.onTabSelect||e.onTabClose!==t.onTabClose||e.onTabDragStart!==t.onTabDragStart||e.onTabDragEnd!==t.onTabDragEnd||e.onDragOver!==t.onDragOver||e.onDragLeave!==t.onDragLeave||e.onDrop!==t.onDrop||e.closeIcon!==t.closeIcon||e.closeButtonClassName!==t.closeButtonClassName||e.style!==t.style||e.children!==t.children)return!1;if(e.node===t.node){if(e.node.selected!==t.node.selected)return!1}else{if(e.node.id!==t.node.id||e.node.selected!==t.node.selected||e.node.width!==t.node.width||e.node.height!==t.node.height||e.node.flex!==t.node.flex||e.node.minWidth!==t.node.minWidth||e.node.minHeight!==t.node.minHeight||e.node.maxWidth!==t.node.maxWidth||e.node.maxHeight!==t.node.maxHeight)return!1;const r=e.node.children||[],l=t.node.children||[];if(r!==l){if(r.length!==l.length)return!1;for(let a=0;a<r.length;a++)if(r[a]!==l[a]){const u=r[a],i=l[a];if(u.id!==i.id||u.type!==i.type||u.name!==i.name||u.component!==i.component||u.enableClose!==i.enableClose||u.enableDrag!==i.enableDrag)return!1}}}return!0});me.displayName="MemoizedTabSet";const ye=({direction:e,onResize:t,onResizeStart:r,size:l=8,className:a="",style:u={},customStyles:i={}})=>{const[g,o]=n.useState(!1),f=n.useRef(0),b=n.useRef(0),m=n.useRef(!1),y=n.useRef(null),w=n.useRef(null),$=n.useCallback(d=>{d.preventDefault(),d.stopPropagation(),o(!0),f.current=e==="horizontal"?d.clientX:d.clientY,b.current=f.current,r?.();const D=E=>{b.current=e==="horizontal"?E.clientX:E.clientY,m.current||(m.current=!0,requestAnimationFrame(()=>{m.current=!1;const I=b.current-f.current;t(I)}))},x=()=>{o(!1),document.removeEventListener("mousemove",D),document.removeEventListener("mouseup",x),y.current=null,w.current=null,m.current=!1};document.addEventListener("mousemove",D),document.addEventListener("mouseup",x),y.current=D,w.current=x},[e,t,r]),O={backgroundColor:"#ffffff",border:"none",outline:"none"},k=n.useMemo(()=>g&&i.active?i.active:i.default?i.default:O,[g,i.active,i.default]),B=n.useMemo(()=>{const d=e==="horizontal";return{...u,width:d?`${l}px`:"100%",height:d?"100%":`${l}px`,minWidth:d?`${l}px`:void 0,minHeight:d?void 0:`${l}px`,flexShrink:0,cursor:d?"col-resize":"row-resize",...k,transition:g?"none":"all 0.2s ease"}},[e,l,u,k,g]);return n.useEffect(()=>()=>{y.current&&document.removeEventListener("mousemove",y.current),w.current&&document.removeEventListener("mouseup",w.current),m.current=!1},[]),C.jsx("div",{className:`react-flex-layout-splitter ${a}`,style:B,onMouseDown:$})},Fe=(e,t)=>({global:{enableClose:!0,enableDrag:!0,enableResize:!0,splitterSize:8,tabOverlapLength:0,direction:"ltr",...t},layout:e}),we=(e,t,r,l)=>({id:e,type:"tab",component:t,name:r,config:l,enableClose:!0,enableDrag:!0}),Se=(e,t,r=0)=>({id:e,type:"tabset",children:t,selected:r,enableClose:!0,enableDrag:!0}),Ee=(e,t,r,l)=>({id:e,type:"row",children:Te(t),width:r,height:l,enableResize:!0}),Ne=(e,t,r,l)=>({id:e,type:"column",children:Te(t),width:r,height:l,enableResize:!0}),G=(e,t)=>{if(e.id===t)return e;if(e.children)for(const r of e.children){const l=G(r,t);if(l)return l}return null},$e=(e,t)=>{if(!e.children)return null;for(const r of e.children)if(r.id===t)return e;for(const r of e.children){const l=$e(r,t);if(l)return l}return null},F=(e,t,r)=>{if(e.id===t)return r===null?null:Object.keys(r).some(a=>e[a]!==r[a])?{...e,...r}:e;if(e.children){let l=null;const a=e.children;for(let u=0;u<a.length;u++){const i=a[u],g=F(i,t,r);g!==i&&l===null&&(l=a.slice(0,u)),l!==null&&g!==null&&l.push(g)}return l===null?e:{...e,children:l}}return e},ve=(e,t)=>{if(!e.children)return e;let r=null;const l=e.children;for(let a=0;a<l.length;a++){const u=l[a];if(u.id===t){r===null&&(r=l.slice(0,a));continue}const i=ve(u,t);i!==u&&r===null&&(r=l.slice(0,a)),r!==null&&r.push(i)}return r===null?e:{...e,children:r}},Te=e=>e.map(t=>({...t,flex:t.flex||1/e.length})),ce=e=>{if(e.type==="tabset"&&(!e.children||e.children.length===0))return null;if(e.children){const t=e.children,r=t.length;let l=null;for(let i=0;i<t.length;i++){const g=t[i],o=ce(g);o!==g&&l===null&&(l=t.slice(0,i)),l!==null&&o!==null&&l.push(o)}const a=l??t,u=a.length<r;if(a.length===0)return null;if((e.type==="row"||e.type==="column")&&a.length>0){const i=a.reduce((o,f)=>o+(f.flex||0),0);if(u||i<.999||a.length===1){let o;if(a.length===1)o=a.map(f=>({...f,flex:1}));else if(i===0||i<.001){const f=1/a.length;o=a.map(b=>({...b,flex:f}))}else{const f=1/i;o=a.map(b=>({...b,flex:(b.flex||0)*f}))}return{...e,children:o}}if(a.length!==r||a.some((o,f)=>o!==t[f]))return{...e,children:a}}if(l!==null)return{...e,children:a}}return e},ke=(e,t,r=null)=>{if(!e.children)return null;for(const l of e.children){if(l.id===t)return r||e;if(l.children){const a=ke(l,t,e);if(a)return a}}return null},ze=(e,t)=>{if(!e.children)return null;for(const r of e.children){if(r.type==="tabset"&&r.children&&r.children.find(a=>a.id===t))return r;if(r.children){const l=ze(r,t);if(l)return l}}return null},He=(e,t,r)=>{const l=G(e,t);if(!l||l.type!=="tabset")return null;const u=[...l.children||[],r],i={...l,children:u,selected:u.length-1};return F(e,t,i)},Be=(e,t)=>{const r=ze(e,t);if(!r||r.type!=="tabset")return{layout:e,restoreData:null};const l=r.children?.find(m=>m.id===t);if(!l||l.type!=="tab")return{layout:e,restoreData:null};const a=r.children?.findIndex(m=>m.id===t),u=r.children?.filter(m=>m.id!==t);if(!u||u.length===0){const m=ve(e,r.id),y={tabId:l.id,component:l.component||"",name:l.name||"",tabsetId:r.id,tabIndex:a!==void 0?a:0,config:l.config};return{layout:m,restoreData:y}}const i=r.selected??0;let g=i;a!==void 0&&a!==-1&&(a<=i&&(g=Math.max(0,i-1)),g=Math.min(g,u.length-1));const o={...r,children:u,selected:u.length>0?g:void 0},f=F(e,r.id,o),b={tabId:l.id,component:l.component||"",name:l.name||"",tabsetId:r.id,tabIndex:a!==void 0?a:0,config:l.config};return{layout:f,restoreData:b}},Ke=(e,t,r)=>{if(G(e,t.tabId))return e;let a=G(e,t.tabsetId);if(!a||a.type!=="tabset"){if(!r)return null;const g=ke(r,t.tabsetId);if(!g)return null;const o=G(e,g.id);if(!o||!o.children)return null;const f=o.children.find(b=>b.id===t.tabsetId);if(f)a=f;else{const b=Se(t.tabsetId,[]),m=[...o.children,b],y={...o,children:m},w=F(e,o.id,y);if(!w||(e=w,a=G(e,t.tabsetId),!a||a.type!=="tabset"))return null}}const u=we(t.tabId,t.component,t.name,t.config);return He(e,t.tabsetId,u)},je=(e,t)=>G(e,t)!==null,_e=(e,t)=>{const r=n.useRef({}),l=n.useRef({}),a=n.useCallback((i,g,o)=>{if(!t)return;const f=pe(e.layout,i);if(!f||!f.children)return;const b=f.children.findIndex(I=>I.id===i),m=b+1;if(m>=f.children.length)return;const y=`${i}-${o}`;if(!r.current[y]){const I=f.children[b],h=f.children[m];r.current[y]={current:I.flex||1,sibling:h.flex||1}}const w=r.current[y],$=w.current+w.sibling,O=o==="horizontal"?window.innerWidth:window.innerHeight,k=w.current/$*O,B=w.sibling/$*O,d=100;let D=k+g,x=B-g;if(D<d){const I=d-D;D=d,x-=I}if(x<d){const I=d-x;x=d,D-=I}const E=D+x;if(E>0){const I=D/E*$,h=x/E*$,p=l.current[y],M=1e-4;if(p&&Math.abs(p.current-I)<M&&Math.abs(p.sibling-h)<M)return;const j=f.children.slice(),Y=j[b],X=j[m];j[b]={...Y,flex:I},j[m]={...X,flex:h};const Q=F(e.layout,f.id,{children:j});Q&&(l.current[y]={current:I,sibling:h},t({...e,layout:Q}))}},[e,t]),u=n.useCallback((i,g)=>{const o=`${i}-${g}`;delete r.current[o],delete l.current[o]},[]);return{handleResize:a,resetResize:u}},pe=(e,t)=>{if(!e.children)return null;for(const r of e.children){if(r.id===t)return e;const l=pe(r,t);if(l)return l}return null},Je=(e,t)=>{const[r,l]=n.useState(null),[a,u]=n.useState(null),[i,g]=n.useState("center"),[o,f]=n.useState(null),b=n.useRef(null),m=n.useRef(e),y=n.useRef(t),w=n.useRef(i),$=n.useRef(o);n.useEffect(()=>{m.current=e},[e]),n.useEffect(()=>{y.current=t},[t]),n.useEffect(()=>{w.current=i},[i]),n.useEffect(()=>{$.current=o},[o]);const O=n.useCallback((x,E)=>{const I={tabsetId:x,tabIndex:E};l(I),b.current=I},[]),k=n.useCallback(()=>{l(null),b.current=null,u(null),f(null)},[]),B=n.useCallback((x,E,I="center",h)=>{x.preventDefault(),x.dataTransfer.dropEffect="move",u(E),g(I),h!==void 0?f(h):I!=="tab"&&f(null)},[]),d=n.useCallback(x=>{x.currentTarget===x.target&&setTimeout(()=>{u(null),f(null)},50)},[]),D=n.useCallback((x,E)=>{x.preventDefault();const I=b.current,h=m.current,p=y.current,M=w.current,j=$.current;if(!I||!p)return;const{tabsetId:Y,tabIndex:X}=I;if(Y===E&&M==="tab"&&j!==null){const N=G(h.layout,Y);if(!N||!N.children)return;const W=N.children[X];if(!W||X===j)return;const U=[...N.children];U.splice(X,1),U.splice(j,0,W);let S=N.selected??0;X<S&&j>=S?S=Math.max(0,S-1):X>S&&j<=S?S=Math.min(S+1,U.length-1):X===S&&(S=j);const R=F(h.layout,Y,{children:U,selected:S});R&&p({...h,layout:R,metadata:h.metadata}),l(null),u(null),f(null);return}if(Y===E&&M!=="tab")return;const Q=G(h.layout,Y),Z=G(h.layout,E);if(!Q||!Z||!Q.children||!Z.children)return;const ne=Q.children[X];if(!ne)return;let q=h.layout;const v=Q.children.filter((N,W)=>W!==X),L=F(q,Y,{children:v,selected:Math.min(Q.selected||0,v.length-1)});if(!L)return;if(q=L,M==="center"){const N=F(q,E,{children:[...Z.children||[],ne],selected:Z.children?.length||0});if(!N)return;q=N}else{const N=Se(`${E}-split-${Date.now()}`,[ne]),W=$e(q,E);if(W){const U=W.children?.findIndex(S=>S.id===E)||0;if(M==="left"||M==="right"){const S=Ee(`${E}-row-${Date.now()}`,[M==="left"?N:Z,M==="left"?Z:N]),R=F(q,W.id,{children:[...W.children?.slice(0,U)||[],S,...W.children?.slice(U+1)||[]]});if(!R)return;q=R}else if(M==="top"||M==="bottom"){const S=Ne(`${E}-column-${Date.now()}`,[M==="top"?N:Z,M==="top"?Z:N]),R=F(q,W.id,{children:[...W.children?.slice(0,U)||[],S,...W.children?.slice(U+1)||[]]});if(!R)return;q=R}}}const A=ce(q);A&&p({...h,layout:A,metadata:h.metadata}),l(null),u(null)},[]);return{draggedTab:r,dragOverTabset:a,dropPosition:i,dropTargetIndex:o,handleDragStart:O,handleDragEnd:k,handleDragOver:B,handleDragLeave:d,handleDrop:D}},Xe="react-flex-layout";class xe{storageKey;autoSave;debounceMs;saveTimeout=null;lastSavedString=null;isAvailable;constructor(t={}){this.storageKey=`${Xe}-${t.key||"default"}`,this.autoSave=t.autoSave!==!1,this.debounceMs=t.debounceMs||500,this.isAvailable=Oe()}save(t){if(this.isAvailable)try{const r=JSON.stringify(t);if(r===this.lastSavedString)return;localStorage.setItem(this.storageKey,r),this.lastSavedString=r}catch{}}load(){if(!this.isAvailable)return null;try{const t=localStorage.getItem(this.storageKey);if(t)return this.lastSavedString=t,JSON.parse(t)}catch{}return null}clear(){if(this.isAvailable)try{localStorage.removeItem(this.storageKey),this.lastSavedString=null}catch{}}exists(){return this.isAvailable?localStorage.getItem(this.storageKey)!==null:!1}debouncedSave(t){this.autoSave&&this.isAvailable&&(this.saveTimeout&&clearTimeout(this.saveTimeout),this.saveTimeout=setTimeout(()=>{this.save(t)},this.debounceMs))}getStorageKey(){return this.storageKey}isAutoSaveEnabled(){return this.autoSave}cancel(){this.saveTimeout&&(clearTimeout(this.saveTimeout),this.saveTimeout=null)}}const qe=e=>new xe(e),Oe=()=>{try{const e="__localStorage_test__";return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch{return!1}},Me=(e,t={})=>{const{onLoad:r,onSave:l,onError:a,...u}=t,i=n.useRef(null),[g,o]=n.useState(e),[f,b]=n.useState(!1),[m,y]=n.useState(!1);n.useEffect(()=>{if(i.current)try{i.current.cancel?.()}catch{}i.current=new xe(u),y(!0)},[u.key,u.autoSave,u.debounceMs]),n.useEffect(()=>{if(!i.current||f)return;const h=i.current.load();h?(o(h),b(!0),r?.(h)):b(!0)},[f,r]);const w=n.useRef(),$=n.useMemo(()=>JSON.stringify(g.layout),[g.layout]),O=n.useMemo(()=>JSON.stringify(e.layout),[e.layout]),k=n.useMemo(()=>g.metadata?JSON.stringify(g.metadata):void 0,[g.metadata]),B=n.useMemo(()=>e.metadata?JSON.stringify(e.metadata):void 0,[e.metadata]);n.useEffect(()=>{if(!(!f||!i.current)){if(w.current!==O&&$!==O){const h={...e};e.global&&(h.global={...e.global}),o(h),w.current=O,i.current.isAutoSaveEnabled()?i.current.debouncedSave(h):i.current.save(h);return}e.metadata&&k!==B&&o(h=>({...h,metadata:e.metadata}))}},[f,i,e,$,O,k,B]);const d=n.useCallback(h=>{if(i.current)try{i.current.isAutoSaveEnabled()?i.current.debouncedSave(h):i.current.save(h),l?.(h)}catch(p){a?.(p)}},[l,a]),D=n.useCallback(h=>{const p={...h};h.global&&(p.global={...h.global}),o(p),d(p)},[d]),x=n.useCallback(()=>{if(i.current)try{i.current.clear()}catch(h){a?.(h)}},[a]),E=n.useCallback(()=>i.current?.exists()??!1,[]),I=n.useCallback(()=>i.current?.getStorageKey()??"",[]);return{model:g,updateModel:D,clearStorage:x,hasStoredData:E,getStorageKey:I,isLoaded:f,hasStorage:m}},We=n.forwardRef(({model:e,factory:t,onModelChange:r,onAction:l,className:a="",style:u={},storage:i,closeIcon:g,closeButtonClassName:o},f)=>{const[b,m]=n.useState(e),[y,w]=n.useState(null),{model:$,updateModel:O,isLoaded:k}=Me(e,{key:i?.key,autoSave:i?.autoSave,debounceMs:i?.debounceMs,onLoad:s=>{r?r(s):m(s)}}),B=i?.enabled?$:r?e:b,d=n.useRef(r),D=n.useRef(i),x=n.useRef(O);n.useEffect(()=>{d.current=r},[r]),n.useEffect(()=>{D.current=i},[i]),n.useEffect(()=>{x.current=O},[O]);const E=n.useCallback(s=>{D.current?.enabled?(x.current(s),d.current&&d.current(s)):d.current?d.current(s):m(s)},[]),{handleResize:I,resetResize:h}=_e(B,E),{dragOverTabset:p,dropPosition:M,dropTargetIndex:j,handleDragStart:Y,handleDragEnd:X,handleDragOver:Q,handleDragLeave:Z,handleDrop:ne}=Je(B,E),q=n.useRef($);n.useEffect(()=>{q.current=$},[$]);const v=n.useRef(b);n.useEffect(()=>{v.current=b},[b]);const L=n.useRef(e);n.useEffect(()=>{L.current=e},[e]);const A=n.useRef(l);n.useEffect(()=>{A.current=l},[l]);const N=n.useCallback(s=>{if(D.current?.enabled){const z=q.current;if(s.type==="changeDirection"){const{direction:c}=s.payload;w(c)}const H=(c=>{switch(s.type){case"selectTab":const{nodeId:P,tabIndex:ee}=s.payload,te=F(c.layout,P,{selected:ee});return!te||te===c.layout?c:{...c,layout:te};case"removeNode":const{nodeId:K,tabIndex:le}=s.payload,V=G(c.layout,K);if(V&&V.children){const J=V.children.filter((oe,De)=>De!==le),ie=V.selected??0;let ae=ie;le<=ie&&(ae=Math.max(0,ie-1)),ae=Math.min(ae,J.length-1);const Ce={...V,children:J,selected:J.length>0?ae:void 0},he=F(c.layout,K,Ce);if(he){const oe=ce(he);if(oe)return{...c,layout:oe}}}return c;case"closeTabset":const{nodeId:ge}=s.payload,se=F(c.layout,ge,null);if(se){const J=ce(se);if(J)return{...c,layout:J}}return c;case"changeDirection":const{direction:fe}=s.payload;return{...c,global:{...c.global,direction:fe}};default:return c}})(z);x.current(H),d.current&&d.current(H),A.current?.(s)}else{if(s.type==="changeDirection"&&d.current){const{direction:z}=s.payload,_=L.current,H={..._,global:{..._.global,direction:z}};d.current(H)}A.current?.(s)}if(!D.current?.enabled&&!d.current){const z=v.current,H=(c=>{switch(s.type){case"selectTab":const{nodeId:P,tabIndex:ee}=s.payload,te=F(c.layout,P,{selected:ee});return!te||te===c.layout?c:{...c,layout:te};case"removeNode":const{nodeId:K,tabIndex:le}=s.payload,V=G(c.layout,K);if(V&&V.children){const J=V.children.filter((oe,De)=>De!==le),ie=V.selected??0;let ae=ie;le<=ie&&(ae=Math.max(0,ie-1)),ae=Math.min(ae,J.length-1);const Ce={...V,children:J,selected:J.length>0?ae:void 0},he=F(c.layout,K,Ce);if(he){const oe=ce(he);if(oe)return{...c,layout:oe}}}return c;case"closeTabset":const{nodeId:ge}=s.payload,se=F(c.layout,ge,null);if(se){const J=ce(se);if(J)return{...c,layout:J}}return c;case"changeDirection":const{direction:fe}=s.payload;return{...c,global:{...c.global,direction:fe}};default:return c}})(z);m(H)}},[]);n.useImperativeHandle(f,()=>({handleAction:N}),[N]);const W=n.useCallback((s,z)=>{N({type:"selectTab",payload:{nodeId:s,tabIndex:z}})},[N]),U=n.useCallback((s,z)=>{N({type:"removeNode",payload:{nodeId:s,tabIndex:z}})},[N]);let S;i?.enabled?y!==null?S=y:S=$?.global?.direction||"ltr":S=B.global?.direction||"ltr";const R=B.global?.splitterSize||8,ue=n.useCallback(s=>{switch(s.type){case"tabset":return C.jsx(me,{node:s,factory:t,onTabSelect:W,onTabClose:U,onTabDragStart:Y,onTabDragEnd:X,onDragOver:Q,onDragLeave:Z,onDrop:ne,dragOverTabset:p,dropPosition:p===s.id?M:void 0,dropTargetIndex:p===s.id?j:void 0,direction:S,closeIcon:g,closeButtonClassName:o},s.id);case"row":const z=S==="rtl",_=s.children||[],H=z?[..._].reverse():_;return C.jsx("div",{className:"react-flex-layout-row",style:{width:s.width?`${s.width}%`:void 0,height:s.height?`${s.height}%`:void 0,flex:`${s.flex||1} 1 0%`,minWidth:s.minWidth?`${s.minWidth}px`:void 0,minHeight:s.minHeight?`${s.minHeight}px`:void 0,maxWidth:s.maxWidth?`${s.maxWidth}px`:void 0,maxHeight:s.maxHeight?`${s.maxHeight}px`:void 0},children:H.map((c,P)=>{const ee=P+1;if(!(ee<H.length))return C.jsx(n.Fragment,{children:ue(c)},c.id);const K=z?_.length-1-P:P,le=z?_.length-1-ee:ee,V=Math.min(K,le);if(Math.max(K,le)!==V+1)return C.jsx(n.Fragment,{children:ue(c)},c.id);const se=_[V],fe=z&&K>le;return C.jsxs(n.Fragment,{children:[ue(c),C.jsx(ye,{direction:"horizontal",onResize:J=>{const ie=fe?-J:J;I(se.id,ie,"horizontal")},onResizeStart:()=>{h(se.id,"horizontal")},size:R})]},c.id)})},s.id);case"column":return C.jsx("div",{className:"react-flex-layout-column",style:{width:s.width?`${s.width}%`:void 0,height:s.height?`${s.height}%`:void 0,flex:`${s.flex||1} 1 0%`,minWidth:s.minWidth?`${s.minWidth}px`:void 0,minHeight:s.minHeight?`${s.minHeight}px`:void 0,maxWidth:s.maxWidth?`${s.maxWidth}px`:void 0,maxHeight:s.maxHeight?`${s.maxHeight}px`:void 0},children:s.children?.map((c,P)=>C.jsxs(n.Fragment,{children:[ue(c),P<(s.children?.length||0)-1&&C.jsx(ye,{direction:"vertical",onResize:ee=>I(c.id,ee,"vertical"),onResizeStart:()=>{h(c.id,"vertical")},size:R})]},c.id))},s.id);case"tab":return t(s);default:return null}},[S,R,t,W,U,I,Y,X,Q,Z,ne,p,M,g,o]);n.useEffect(()=>{!i?.enabled&&y!==null&&w(null)},[i?.enabled,y]),n.useEffect(()=>{i?.enabled&&y!==null&&($?.global?.direction||"ltr")===y&&w(null)},[i?.enabled,y,$?.global?.direction]);const de=n.useMemo(()=>ue(B.layout),[ue,B.layout]),re={...u,height:"100%",width:"100%"};return i?.enabled&&!k?C.jsx("div",{className:`react-flex-layout ${a}`,style:{...re,display:"flex",alignItems:"center",justifyContent:"center"},children:C.jsx("div",{children:"Loading layout..."})}):C.jsx("div",{className:`react-flex-layout ${a}`,style:re,dir:S,children:de})});We.displayName="Layout";const Ae=n.memo(be,(e,t)=>!(e.className!==t.className||e.style!==t.style||e.closeIcon!==t.closeIcon||e.closeButtonClassName!==t.closeButtonClassName||e.index!==t.index||e.onSelect!==t.onSelect||e.onClose!==t.onClose||e.onDragStart!==t.onDragStart||e.onDragEnd!==t.onDragEnd||e.node.id!==t.node.id||e.node.name!==t.node.name));Ae.displayName="MemoizedTab",T.DefaultCloseIcon=Ie,T.Layout=We,T.LayoutStorage=xe,T.MemoizedTab=Ae,T.MemoizedTabSet=me,T.Splitter=ye,T.Tab=be,T.TabSet=Le,T.addTabToTabset=He,T.calculateFlexValues=Te,T.createColumn=Ne,T.createLayoutModel=Fe,T.createLayoutStorage=qe,T.createRow=Ee,T.createTab=we,T.createTabSet=Se,T.findNodeById=G,T.isLocalStorageAvailable=Oe,T.removeEmptyTabsets=ce,T.removeNodeById=ve,T.removeTab=Be,T.restoreTab=Ke,T.tabExists=je,T.updateNodeById=F,T.useLayoutStorage=Me,Object.defineProperty(T,Symbol.toStringTag,{value:"Module"})}));
