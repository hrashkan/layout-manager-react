(function(v,g){typeof exports=="object"&&typeof module<"u"?g(exports,require("react/jsx-runtime"),require("react")):typeof define=="function"&&define.amd?define(["exports","react/jsx-runtime","react"],g):(v=typeof globalThis<"u"?globalThis:v||self,g(v.ReactFlexLayout={},v.React,v.React))})(this,(function(v,g,n){"use strict";const Oe=({size:e=16,color:t="#666",className:r=""})=>g.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:r,children:[g.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),g.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),Le=({node:e,index:t,onClose:r,onSelect:l,onDragStart:i,onDragEnd:o,className:s="",style:d={},closeIcon:h,closeButtonClassName:S=""})=>{const y=n.useRef(!1),b=n.useCallback(()=>{l?.(e.id)},[e.id,l]),x=n.useCallback(L=>{L.stopPropagation(),r?.(e.id)},[e.id,r]),C=n.useCallback(L=>{L.dataTransfer.setData("text/plain",e.id),L.dataTransfer.effectAllowed="move",L.currentTarget.classList.add("dragging"),document.body.classList.add("dragging"),y.current=!0,i?.(e.id,t)},[e.id,t,i]),N=n.useCallback(L=>{L.currentTarget.classList.remove("dragging"),document.body.classList.remove("dragging"),y.current=!1,o?.()},[o]);n.useEffect(()=>()=>{y.current&&(document.body.classList.remove("dragging"),y.current=!1)},[]);const A=n.useMemo(()=>({...d,cursor:"grab"}),[d]);return g.jsxs("div",{className:`react-flex-layout-tab ${s}`,style:A,onClick:b,draggable:!0,onDragStart:C,onDragEnd:N,children:[g.jsx("span",{className:"react-flex-layout-tab-title",children:e.name||"Untitled"}),g.jsx("button",{className:`react-flex-layout-tab-close ${S}`.trim(),onClick:x,type:"button","aria-label":"Close tab",children:h||g.jsx(Oe,{})})]})},we=e=>g.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:g.jsx("polyline",{points:"15 18 9 12 15 6"})});we.displayName="ScrollLeftIcon";const Ie=e=>g.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:g.jsx("polyline",{points:"9 18 15 12 9 6"})});Ie.displayName="ScrollRightIcon";const We=({node:e,children:t,factory:r,onTabSelect:l,onTabClose:i,onTabDragStart:o,onTabDragEnd:s,onDragOver:d,onDragLeave:h,onDrop:S,dragOverTabset:y,dropPosition:b,dropTargetIndex:x,direction:C="ltr",className:N="",style:A={},closeIcon:L,closeButtonClassName:H,scrollLeftIcon:k,scrollRightIcon:O})=>{const D=n.useMemo(()=>e.children?.filter(c=>c.type==="tab")||[],[e.children]),z=n.useMemo(()=>{const c=new Map;for(let f=0;f<D.length;f++){const j=D[f];j&&j.id&&c.set(j.id,f)}return c},[D]),_=n.useMemo(()=>C==="rtl"?[...D].reverse():D,[D,C]),T=e.selected??0,m=Math.min(T,Math.max(0,D.length-1)),w=D[m],X=n.useCallback(c=>{const f=z.get(c);f!==void 0&&f!==-1&&l?.(e.id,f)},[e.id,z,l]),E=n.useCallback(c=>{const f=z.get(c);f!==void 0&&f!==-1&&i?.(e.id,f)},[e.id,z,i]),ee=n.useCallback((c,f)=>{const j=f!==void 0?f:z.get(c)??-1;j!==-1&&o?.(e.id,j)},[e.id,z,o]),F=n.useRef(null),J=n.useRef(null),[U,Z]=n.useState(!1),[re,Q]=n.useState(!1),oe=n.useRef(null),Y=n.useRef();Y.current=()=>{const c=J.current;if(!c){Z(!1),Q(!1);return}const{scrollLeft:f,scrollWidth:j,clientWidth:ae}=c;Z(f>1),Q(f<j-ae-1)};const de=n.useCallback(()=>{oe.current&&clearTimeout(oe.current),oe.current=setTimeout(()=>{Y.current?.()},10)},[]),ge=n.useCallback(c=>{c.preventDefault(),c.dataTransfer.dropEffect="move";const f=c.currentTarget.getBoundingClientRect(),j=c.clientX-f.left,ae=c.clientY-f.top,te=f.width,ue=f.height;let V="center";if(ae<40){const a=F.current;if(a){const $=a.getBoundingClientRect(),R=c.clientX-$.left,p=a.querySelectorAll(".react-flex-layout-tab");let u=D.length;if(C==="rtl"){for(let M=p.length-1;M>=0;M--){const I=p[M].getBoundingClientRect(),ie=I.left-$.left,ne=I.right-$.left,ce=(ie+ne)/2;if(R>ce){const B=z.get(_[M].id);B!==void 0&&B!==-1&&(u=B);break}}if(u===D.length&&p.length>0){const M=p[0].getBoundingClientRect();if(R>M.right-$.left){const I=z.get(_[0].id);I!==void 0&&I!==-1&&(u=I)}}}else for(let M=0;M<p.length;M++){const I=p[M].getBoundingClientRect(),ie=I.left-$.left,ne=I.right-$.left,ce=(ie+ne)/2;if(R<ce){const B=z.get(_[M].id);B!==void 0&&B!==-1&&(u=B);break}}V="tab",d?.(c,e.id,V,u);return}}j<te*.25?V=C==="rtl"?"right":"left":j>te*.75?V=C==="rtl"?"left":"right":ae<ue*.25?V="top":ae>ue*.75?V="bottom":V="center",d?.(c,e.id,V)},[e.id,C,D.length,_,z,d]),be=n.useCallback(c=>{h?.(c)},[h]),q=n.useCallback(c=>{S?.(c,e.id)},[e.id,S]),K=y===e.id;n.useEffect(()=>{const c=J.current;if(!c||m<0)return;let f;return f=requestAnimationFrame(()=>{const ae=c.children[m];if(!ae)return;const te=c.getBoundingClientRect(),ue=ae.getBoundingClientRect(),V=c.scrollLeft;ue.left<te.left?c.scrollTo({left:V-(te.left-ue.left)-10,behavior:"smooth"}):ue.right>te.right&&c.scrollTo({left:V+(ue.right-te.right)+10,behavior:"smooth"})}),()=>{f&&cancelAnimationFrame(f)}},[m,_.length]),n.useEffect(()=>{const c=J.current;if(!c)return;const f={current:0};f.current=requestAnimationFrame(()=>{Y.current?.()}),c.addEventListener("scroll",de,{passive:!0});const j=new ResizeObserver(()=>{f.current&&cancelAnimationFrame(f.current),f.current=requestAnimationFrame(()=>{Y.current?.()})});return j.observe(c),()=>{f.current&&cancelAnimationFrame(f.current),c.removeEventListener("scroll",de),j.disconnect(),oe.current&&(clearTimeout(oe.current),oe.current=null)}},[de,_.length]);const le={...A,width:e.width?`${e.width}%`:void 0,height:e.height?`${e.height}%`:void 0,flex:`${e.flex||1} 1 0%`,minWidth:e.minWidth?`${e.minWidth}px`:void 0,minHeight:e.minHeight?`${e.minHeight}px`:void 0,maxWidth:e.maxWidth?`${e.maxWidth}px`:void 0,maxHeight:e.maxHeight?`${e.maxHeight}px`:void 0};if(D.length===0)return null;const W=K&&b?C==="rtl"&&(b==="left"||b==="right")?b==="left"?"right":"left":b:void 0;return g.jsxs("div",{className:`react-flex-layout-tabset ${K?"drag-over":""} ${N}`,style:le,"data-tabset-id":e.id,"data-drop-position":W,onDragOver:ge,onDragLeave:be,onDrop:q,children:[g.jsxs("div",{className:"react-flex-layout-tabset-header",ref:F,children:[U&&g.jsx("button",{className:"react-flex-layout-tabset-scroll-button react-flex-layout-tabset-scroll-left",onClick:()=>{const c=J.current;c&&c.scrollBy({left:-200,behavior:"smooth"})},type:"button","aria-label":"Scroll left",children:k||g.jsx(we,{})}),g.jsxs("div",{ref:J,className:"react-flex-layout-tabset-tabs-container",onScroll:de,children:[_.map(c=>{const f=z.get(c.id)??-1,j=f===m,ae=K&&b==="tab"&&x!==null&&f===x;return g.jsxs(n.Fragment,{children:[ae&&g.jsx("div",{className:"react-flex-layout-tab-drop-indicator"}),g.jsx(Le,{node:c,index:f,onSelect:X,onClose:E,onDragStart:ee,onDragEnd:s,className:j?"active":"",closeIcon:L,closeButtonClassName:H})]},c.id)}),K&&b==="tab"&&x!==null&&x===D.length&&g.jsx("div",{className:"react-flex-layout-tab-drop-indicator"})]}),re&&g.jsx("button",{className:"react-flex-layout-tabset-scroll-button react-flex-layout-tabset-scroll-right",onClick:()=>{const c=J.current;c&&c.scrollBy({left:200,behavior:"smooth"})},type:"button","aria-label":"Scroll right",children:O||g.jsx(Ie,{})})]}),g.jsx("div",{className:"react-flex-layout-tabset-content",children:w&&(r?r(w):t)})]})},De=n.memo(We,(e,t)=>{if(e.className!==t.className||e.direction!==t.direction||e.dragOverTabset!==t.dragOverTabset||e.dropPosition!==t.dropPosition||e.dropTargetIndex!==t.dropTargetIndex||e.factory!==t.factory||e.onTabSelect!==t.onTabSelect||e.onTabClose!==t.onTabClose||e.onTabDragStart!==t.onTabDragStart||e.onTabDragEnd!==t.onTabDragEnd||e.onDragOver!==t.onDragOver||e.onDragLeave!==t.onDragLeave||e.onDrop!==t.onDrop||e.closeIcon!==t.closeIcon||e.closeButtonClassName!==t.closeButtonClassName||e.style!==t.style||e.children!==t.children)return!1;if(e.node===t.node){if(e.node.selected!==t.node.selected)return!1}else{if(e.node.id!==t.node.id||e.node.selected!==t.node.selected||e.node.width!==t.node.width||e.node.height!==t.node.height||e.node.flex!==t.node.flex||e.node.minWidth!==t.node.minWidth||e.node.minHeight!==t.node.minHeight||e.node.maxWidth!==t.node.maxWidth||e.node.maxHeight!==t.node.maxHeight)return!1;const r=e.node.children||[],l=t.node.children||[];if(r!==l){if(r.length!==l.length)return!1;for(let i=0;i<r.length;i++)if(r[i]!==l[i]){const o=r[i],s=l[i];if(o.id!==s.id||o.type!==s.type||o.name!==s.name||o.component!==s.component||o.enableClose!==s.enableClose||o.enableDrag!==s.enableDrag)return!1}}}return!0});De.displayName="MemoizedTabSet";const Qe=({direction:e,onResize:t,onResizeStart:r,size:l=8,className:i="",style:o={},customStyles:s={}})=>{const[d,h]=n.useState(!1),S=n.useRef(0),y=n.useRef(0),b=n.useRef(!1),x=n.useRef(null),C=n.useRef(null),N=n.useCallback(k=>{k.preventDefault(),k.stopPropagation(),h(!0),S.current=e==="horizontal"?k.clientX:k.clientY,y.current=S.current,r?.();const O=z=>{y.current=e==="horizontal"?z.clientX:z.clientY,b.current||(b.current=!0,requestAnimationFrame(()=>{b.current=!1;const _=y.current-S.current;t(_)}))},D=()=>{h(!1),document.removeEventListener("mousemove",O),document.removeEventListener("mouseup",D),x.current=null,C.current=null,b.current=!1};document.addEventListener("mousemove",O),document.addEventListener("mouseup",D),x.current=O,C.current=D},[e,t,r]),A={backgroundColor:"#ffffff",border:"none",outline:"none"},L=n.useMemo(()=>d&&s.active?s.active:s.default?s.default:A,[d,s.active,s.default]),H=n.useMemo(()=>{const k=e==="horizontal";return{...o,width:k?`${l}px`:"100%",height:k?"100%":`${l}px`,minWidth:k?`${l}px`:void 0,minHeight:k?void 0:`${l}px`,flexShrink:0,cursor:k?"col-resize":"row-resize",...L,transition:d?"none":"all 0.2s ease"}},[e,l,o,L,d]);return n.useEffect(()=>()=>{x.current&&document.removeEventListener("mousemove",x.current),C.current&&document.removeEventListener("mouseup",C.current),b.current=!1},[]),g.jsx("div",{className:`react-flex-layout-splitter ${i}`,style:H,onMouseDown:N})},Ee=n.memo(Qe,(e,t)=>e.direction===t.direction&&e.size===t.size&&e.onResize===t.onResize&&e.onResizeStart===t.onResizeStart&&e.className===t.className&&e.style===t.style&&e.customStyles===t.customStyles),Re=e=>{const t=new Map,r=new Map,l=(i,o=null)=>{if(t.set(i.id,i),o&&r.set(i.id,o),i.children)for(const s of i.children)l(s,i)};return l(e),{nodeIndex:t,parentIndex:r}},ve=(e,t)=>e.get(t)??null,pe=(e,t)=>e.get(t)??null,Pe=(e,t)=>({global:{enableClose:!0,enableDrag:!0,enableResize:!0,splitterSize:8,tabOverlapLength:0,direction:"ltr",...t},layout:e}),Be=(e,t,r,l)=>({id:e,type:"tab",component:t,name:r,config:l,enableClose:!0,enableDrag:!0}),Ne=(e,t,r=0)=>({id:e,type:"tabset",children:t,selected:r,enableClose:!0,enableDrag:!0}),Fe=(e,t,r,l)=>({id:e,type:"row",children:ze(t),width:r,height:l,enableResize:!0}),Ke=(e,t,r,l)=>({id:e,type:"column",children:ze(t),width:r,height:l,enableResize:!0}),se=(e,t)=>{if(e.id===t)return e;if(e.children)for(const r of e.children){const l=se(r,t);if(l)return l}return null},je=(e,t)=>{if(!e.children)return null;for(const r of e.children)if(r.id===t)return e;for(const r of e.children){const l=je(r,t);if(l)return l}return null},G=(e,t,r)=>{if(e.id===t)return r===null?null:Object.keys(r).some(i=>{const o=i;return e[o]!==r[o]})?{...e,...r}:e;if(e.children){let l=null;const i=e.children;for(let o=0;o<i.length;o++){const s=i[o],d=G(s,t,r);d!==s&&l===null&&(l=i.slice(0,o)),l!==null&&d!==null&&l.push(d)}return l===null?e:{...e,children:l}}return e},ke=(e,t)=>{if(!e.children)return e;let r=null;const l=e.children;for(let i=0;i<l.length;i++){const o=l[i];if(o.id===t){r===null&&(r=l.slice(0,i));continue}const s=ke(o,t);s!==o&&r===null&&(r=l.slice(0,i)),r!==null&&r.push(s)}return r===null?e:{...e,children:r}},ze=e=>e.map(t=>({...t,flex:t.flex||1/e.length})),he=e=>{if(e.type==="tabset"&&(!e.children||e.children.length===0))return null;if(e.children){const t=e.children,r=t.length;let l=null;for(let s=0;s<t.length;s++){const d=t[s],h=he(d);h!==d&&l===null&&(l=t.slice(0,s)),l!==null&&h!==null&&l.push(h)}const i=l??t,o=i.length<r;if(i.length===0)return null;if((e.type==="row"||e.type==="column")&&i.length>0){const s=i.reduce((h,S)=>h+(S.flex||0),0);if(o||s<.999||i.length===1){let h;if(i.length===1)h=i.map(S=>({...S,flex:1}));else if(s===0||s<.001){const S=1/i.length;h=i.map(y=>({...y,flex:S}))}else{const S=1/s;h=i.map(y=>({...y,flex:(y.flex||0)*S}))}return{...e,children:h}}if(i.length!==r||i.some((h,S)=>h!==t[S]))return{...e,children:i}}if(l!==null)return{...e,children:i}}return e},_e=(e,t,r=null)=>{if(!e.children)return null;for(const l of e.children){if(l.id===t)return r||e;if(l.children){const i=_e(l,t,e);if(i)return i}}return null},qe=(e,t)=>{if(!e.children)return null;for(const r of e.children){if(r.type==="tabset"&&r.children&&r.children.find(i=>i.id===t))return r;if(r.children){const l=qe(r,t);if(l)return l}}return null},Xe=(e,t,r)=>{const l=se(e,t);if(!l||l.type!=="tabset")return null;const o=[...l.children||[],r],s={...l,children:o,selected:o.length-1};return G(e,t,s)},et=(e,t)=>{const r=qe(e,t);if(!r||r.type!=="tabset")return{layout:e,restoreData:null};const l=r.children?.find(b=>b.id===t);if(!l||l.type!=="tab")return{layout:e,restoreData:null};const i=r.children?.findIndex(b=>b.id===t),o=r.children?.filter(b=>b.id!==t);if(!o||o.length===0){const b=ke(e,r.id),x={tabId:l.id,component:l.component||"",name:l.name||"",tabsetId:r.id,tabIndex:i!==void 0?i:0,config:l.config};return{layout:b,restoreData:x}}const s=r.selected??0;let d=s;i!==void 0&&i!==-1&&(i<=s&&(d=Math.max(0,s-1)),d=Math.min(d,o.length-1));const h={...r,children:o,selected:o.length>0?d:void 0},S=G(e,r.id,h),y={tabId:l.id,component:l.component||"",name:l.name||"",tabsetId:r.id,tabIndex:i!==void 0?i:0,config:l.config};return{layout:S,restoreData:y}},tt=(e,t,r)=>{if(se(e,t.tabId))return e;let i=se(e,t.tabsetId);if(!i||i.type!=="tabset"){if(!r)return null;const d=_e(r,t.tabsetId);if(!d)return null;const h=se(e,d.id);if(!h||!h.children)return null;const S=h.children.find(y=>y.id===t.tabsetId);if(S)i=S;else{const y=Ne(t.tabsetId,[]),b=[...h.children,y],x={...h,children:b},C=G(e,h.id,x);if(!C||(e=C,i=se(e,t.tabsetId),!i||i.type!=="tabset"))return null}}const o=Be(t.tabId,t.component,t.name,t.config);return Xe(e,t.tabsetId,o)},nt=(e,t)=>se(e,t)!==null,rt=(e,t,r)=>{const l=n.useRef({}),i=n.useRef({}),o=n.useRef(e),s=n.useRef(t);n.useEffect(()=>{o.current=e},[e]),n.useEffect(()=>{s.current=t},[t]);const d=n.useRef(r);n.useEffect(()=>{d.current=r},[r]);const h=n.useCallback((y,b,x)=>{if(!s.current)return;const C=o.current,N=(d.current&&pe(d.current,y))??Je(C.layout,y);if(!N||!N.children)return;const A=N.children.findIndex(E=>E.id===y),L=A+1;if(L>=N.children.length)return;const H=`${y}-${x}`;if(!l.current[H]){const E=N.children[A],ee=N.children[L];l.current[H]={current:E.flex||1,sibling:ee.flex||1}}const k=l.current[H],O=k.current+k.sibling,D=x==="horizontal"?window.innerWidth:window.innerHeight,z=k.current/O*D,_=k.sibling/O*D,T=100;let m=z+b,w=_-b;if(m<T){const E=T-m;m=T,w-=E}if(w<T){const E=T-w;w=T,m-=E}const X=m+w;if(X>0){const E=m/X*O,ee=w/X*O,F=i.current[H],J=1e-4;if(F&&Math.abs(F.current-E)<J&&Math.abs(F.sibling-ee)<J)return;const U=N.children.slice(),Z=U[A],re=U[L];U[A]={...Z,flex:E},U[L]={...re,flex:ee};const Q=G(C.layout,N.id,{children:U});Q&&(i.current[H]={current:E,sibling:ee},s.current({...C,layout:Q}))}},[]),S=n.useCallback((y,b)=>{const x=`${y}-${b}`;delete l.current[x],delete i.current[x]},[]);return{handleResize:h,resetResize:S}},Je=(e,t)=>{if(!e.children)return null;for(const r of e.children){if(r.id===t)return e;const l=Je(r,t);if(l)return l}return null},lt=(e,t,r,l)=>{const[i,o]=n.useState(null),[s,d]=n.useState(null),[h,S]=n.useState("center"),[y,b]=n.useState(null),x=n.useRef(null),C=n.useRef(e),N=n.useRef(t),A=n.useRef(h),L=n.useRef(y),H=n.useRef(r),k=n.useRef(l);n.useEffect(()=>{C.current=e},[e]),n.useEffect(()=>{N.current=t},[t]),n.useEffect(()=>{A.current=h},[h]),n.useEffect(()=>{L.current=y},[y]),n.useEffect(()=>{H.current=r},[r]),n.useEffect(()=>{k.current=l},[l]);const O=n.useCallback((m,w)=>{const X={tabsetId:m,tabIndex:w};o(X),x.current=X},[]),D=n.useCallback(()=>{o(null),x.current=null,d(null),b(null)},[]),z=n.useCallback((m,w,X="center",E)=>{m.preventDefault(),m.dataTransfer.dropEffect="move",d(w),S(X),E!==void 0?b(E):X!=="tab"&&b(null)},[]),_=n.useCallback(m=>{m.currentTarget===m.target&&setTimeout(()=>{d(null),b(null)},50)},[]),T=n.useCallback((m,w)=>{m.preventDefault();const X=x.current,E=C.current,ee=N.current,F=A.current,J=L.current;if(!X||!ee)return;const{tabsetId:U,tabIndex:Z}=X;if(U===w&&F==="tab"&&J!==null){const q=(H.current&&ve(H.current,U))??se(E.layout,U);if(!q||!q.children)return;const K=q.children[Z];if(!K||Z===J)return;const le=[...q.children];le.splice(Z,1),le.splice(J,0,K);let W=q.selected??0;Z<W&&J>=W?W=Math.max(0,W-1):Z>W&&J<=W?W=Math.min(W+1,le.length-1):Z===W&&(W=J);const c=G(E.layout,U,{children:le,selected:W});c&&ee({...E,layout:c,metadata:E.metadata}),o(null),d(null),b(null);return}if(U===w&&F!=="tab")return;const re=(H.current&&ve(H.current,U))??se(E.layout,U),Q=(H.current&&ve(H.current,w))??se(E.layout,w);if(!re||!Q||!re.children||!Q.children)return;const oe=re.children[Z];if(!oe)return;let Y=E.layout;const de=re.children.filter((q,K)=>K!==Z),ge=G(Y,U,{children:de,selected:Math.min(re.selected||0,de.length-1)});if(!ge)return;if(Y=ge,F==="center"){const q=G(Y,w,{children:[...Q.children||[],oe],selected:Q.children?.length||0});if(!q)return;Y=q}else{const q=Ne(`${w}-split-${Date.now()}`,[oe]),K=(k.current&&pe(k.current,w))??je(Y,w);if(K){const le=K.children?.findIndex(W=>W.id===w)||0;if(F==="left"||F==="right"){const W=Fe(`${w}-row-${Date.now()}`,[F==="left"?q:Q,F==="left"?Q:q]),c=G(Y,K.id,{children:[...K.children?.slice(0,le)||[],W,...K.children?.slice(le+1)||[]]});if(!c)return;Y=c}else if(F==="top"||F==="bottom"){const W=Ke(`${w}-column-${Date.now()}`,[F==="top"?q:Q,F==="top"?Q:q]),c=G(Y,K.id,{children:[...K.children?.slice(0,le)||[],W,...K.children?.slice(le+1)||[]]});if(!c)return;Y=c}}}const be=he(Y);be&&ee({...E,layout:be,metadata:E.metadata}),o(null),d(null)},[]);return{draggedTab:i,dragOverTabset:s,dropPosition:h,dropTargetIndex:y,handleDragStart:O,handleDragEnd:D,handleDragOver:z,handleDragLeave:_,handleDrop:T}},it="react-flex-layout";class $e{storageKey;autoSave;debounceMs;saveTimeout=null;lastSavedString=null;isAvailable;constructor(t={}){this.storageKey=`${it}-${t.key||"default"}`,this.autoSave=t.autoSave!==!1,this.debounceMs=t.debounceMs||500,this.isAvailable=Ue()}save(t){if(this.isAvailable)try{const r=JSON.stringify(t);if(r===this.lastSavedString)return;localStorage.setItem(this.storageKey,r),this.lastSavedString=r}catch{}}load(){if(!this.isAvailable)return null;try{const t=localStorage.getItem(this.storageKey);if(t)return this.lastSavedString=t,JSON.parse(t)}catch{}return null}clear(){if(this.isAvailable)try{localStorage.removeItem(this.storageKey),this.lastSavedString=null}catch{}}exists(){return this.isAvailable?localStorage.getItem(this.storageKey)!==null:!1}debouncedSave(t){this.autoSave&&this.isAvailable&&(this.saveTimeout&&clearTimeout(this.saveTimeout),this.saveTimeout=setTimeout(()=>{this.save(t)},this.debounceMs))}getStorageKey(){return this.storageKey}isAutoSaveEnabled(){return this.autoSave}cancel(){this.saveTimeout&&(clearTimeout(this.saveTimeout),this.saveTimeout=null)}}const st=e=>new $e(e),Ue=()=>{try{const e="__localStorage_test__";return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch{return!1}},Ye=(e,t={})=>{const{onLoad:r,onSave:l,onError:i,...o}=t,s=n.useRef(null),[d,h]=n.useState(e),[S,y]=n.useState(!1),[b,x]=n.useState(!1);n.useEffect(()=>{if(s.current)try{s.current.cancel?.()}catch{}s.current=new $e(o),x(!0)},[o.key,o.autoSave,o.debounceMs]),n.useEffect(()=>{if(!s.current||S)return;const T=s.current.load();T?(h(T),y(!0),r?.(T)):y(!0)},[S,r]);const C=n.useRef(),N=n.useMemo(()=>JSON.stringify(d.layout),[d.layout]),A=n.useMemo(()=>JSON.stringify(e.layout),[e.layout]),L=n.useMemo(()=>d.metadata?JSON.stringify(d.metadata):void 0,[d.metadata]),H=n.useMemo(()=>e.metadata?JSON.stringify(e.metadata):void 0,[e.metadata]);n.useEffect(()=>{if(!(!S||!s.current)){if(C.current!==A&&N!==A){const T={...e};e.global&&(T.global={...e.global}),h(T),C.current=A,s.current.isAutoSaveEnabled()?s.current.debouncedSave(T):s.current.save(T);return}e.metadata&&L!==H&&h(T=>({...T,metadata:e.metadata}))}},[S,s,e,N,A,L,H]);const k=n.useCallback(T=>{if(s.current)try{s.current.isAutoSaveEnabled()?s.current.debouncedSave(T):s.current.save(T),l?.(T)}catch(m){i?.(m)}},[l,i]),O=n.useCallback(T=>{const m={...T};T.global&&(m.global={...T.global}),h(m),k(m)},[k]),D=n.useCallback(()=>{if(s.current)try{s.current.clear()}catch(T){i?.(T)}},[i]),z=n.useCallback(()=>s.current?.exists()??!1,[]),_=n.useCallback(()=>s.current?.getStorageKey()??"",[]);return{model:d,updateModel:O,clearStorage:D,hasStoredData:z,getStorageKey:_,isLoaded:S,hasStorage:b}},at=e=>{const t=n.useRef(null),r=n.useRef(e),l=n.useMemo(()=>{if(t.current===null||r.current!==e||r.current.id!==e.id){const i=Re(e);return t.current=i,r.current=e,i}return t.current},[e]);return n.useEffect(()=>{r.current=e},[e]),l},Ve=n.forwardRef(({model:e,factory:t,onModelChange:r,onAction:l,className:i="",style:o={},storage:s,closeIcon:d,closeButtonClassName:h,scrollLeftIcon:S,scrollRightIcon:y},b)=>{const[x,C]=n.useState(e),[N,A]=n.useState(null),{model:L,updateModel:H,isLoaded:k}=Ye(e,{key:s?.key,autoSave:s?.autoSave,debounceMs:s?.debounceMs,onLoad:a=>{r?r(a):C(a)}}),O=s?.enabled?L:r?e:x,{nodeIndex:D,parentIndex:z}=at(O.layout),_=n.useRef(D),T=n.useRef(z);n.useEffect(()=>{_.current=D,T.current=z},[D,z]);const m=n.useRef(r),w=n.useRef(s),X=n.useRef(H);n.useEffect(()=>{m.current=r},[r]),n.useEffect(()=>{w.current=s},[s]),n.useEffect(()=>{X.current=H},[H]);const E=n.useCallback(a=>{w.current?.enabled?(X.current(a),m.current&&m.current(a)):m.current?m.current(a):C(a)},[]),{handleResize:ee,resetResize:F}=rt(O,E,z),J=100,U=n.useRef(new Map),Z=n.useCallback((a,$,R)=>{const p=`${a}-${$}-${R?"rtl":"ltr"}`,u=U.current;if(u.has(p)){const I=u.get(p);return u.delete(p),u.set(p,I),I}const M={onResize:I=>{const ie=R?-I:I;ee(a,ie,$)},onResizeStart:()=>{F(a,$)}};if(u.size>=J){const I=u.keys().next().value;I&&u.delete(I)}return u.set(p,M),M},[ee,F]),{dragOverTabset:re,dropPosition:Q,dropTargetIndex:oe,handleDragStart:Y,handleDragEnd:de,handleDragOver:ge,handleDragLeave:be,handleDrop:q}=lt(O,E,D,z),K=n.useRef(L);n.useEffect(()=>{K.current=L},[L]);const le=n.useRef(x);n.useEffect(()=>{le.current=x},[x]);const W=n.useRef(e);n.useEffect(()=>{W.current=e},[e]);const c=n.useRef(l);n.useEffect(()=>{c.current=l},[l]);const f=n.useCallback(a=>{if(w.current?.enabled){const $=K.current;if(a.type==="changeDirection"){const{direction:u}=a.payload;A(u)}const p=(u=>{switch(a.type){case"selectTab":const{nodeId:M,tabIndex:I}=a.payload,ie=G(u.layout,M,{selected:I});return!ie||ie===u.layout?u:{...u,layout:ie};case"removeNode":const{nodeId:ne,tabIndex:ce}=a.payload,B=ve(_.current,ne)??se(u.layout,ne);if(B&&B.children){const P=B.children.filter((Se,Ae)=>Ae!==ce),ye=B.selected??0;let fe=ye;ce<=ye&&(fe=Math.max(0,ye-1)),fe=Math.min(fe,P.length-1);const Me={...B,children:P,selected:P.length>0?fe:void 0},xe=G(u.layout,ne,Me);if(xe){const Se=he(xe);if(Se)return{...u,layout:Se}}}return u;case"closeTabset":const{nodeId:Ce}=a.payload,me=G(u.layout,Ce,null);if(me){const P=he(me);if(P)return{...u,layout:P}}return u;case"changeDirection":const{direction:Te}=a.payload;return{...u,global:{...u.global,direction:Te}};default:return u}})($);X.current(p),m.current&&m.current(p),c.current?.(a)}else{if(a.type==="changeDirection"&&m.current){const{direction:$}=a.payload,R=W.current,p={...R,global:{...R.global,direction:$}};m.current(p)}c.current?.(a)}if(!w.current?.enabled&&!m.current){const $=le.current,p=(u=>{switch(a.type){case"selectTab":const{nodeId:M,tabIndex:I}=a.payload,ie=G(u.layout,M,{selected:I});return!ie||ie===u.layout?u:{...u,layout:ie};case"removeNode":const{nodeId:ne,tabIndex:ce}=a.payload,B=ve(_.current,ne)??se(u.layout,ne);if(B&&B.children){const P=B.children.filter((Se,Ae)=>Ae!==ce),ye=B.selected??0;let fe=ye;ce<=ye&&(fe=Math.max(0,ye-1)),fe=Math.min(fe,P.length-1);const Me={...B,children:P,selected:P.length>0?fe:void 0},xe=G(u.layout,ne,Me);if(xe){const Se=he(xe);if(Se)return{...u,layout:Se}}}return u;case"closeTabset":const{nodeId:Ce}=a.payload,me=G(u.layout,Ce,null);if(me){const P=he(me);if(P)return{...u,layout:P}}return u;case"changeDirection":const{direction:Te}=a.payload;return{...u,global:{...u.global,direction:Te}};default:return u}})($);C(p)}},[]);n.useImperativeHandle(b,()=>({handleAction:f}),[f]);const j=n.useCallback((a,$)=>{f({type:"selectTab",payload:{nodeId:a,tabIndex:$}})},[f]),ae=n.useCallback((a,$)=>{f({type:"removeNode",payload:{nodeId:a,tabIndex:$}})},[f]);let te;s?.enabled?N!==null?te=N:te=L?.global?.direction||"ltr":te=O.global?.direction||"ltr";const ue=O.global?.splitterSize||8,V=n.useCallback(a=>{switch(a.type){case"tabset":return g.jsx(De,{node:a,factory:t,onTabSelect:j,onTabClose:ae,onTabDragStart:Y,onTabDragEnd:de,onDragOver:ge,onDragLeave:be,onDrop:q,dragOverTabset:re,dropPosition:re===a.id?Q:void 0,dropTargetIndex:re===a.id?oe:void 0,direction:te,closeIcon:d,closeButtonClassName:h,scrollLeftIcon:S,scrollRightIcon:y},a.id);case"row":const $=te==="rtl",R=a.children||[],p=$?[...R].reverse():R;return g.jsx("div",{className:"react-flex-layout-row",style:{width:a.width?`${a.width}%`:void 0,height:a.height?`${a.height}%`:void 0,flex:`${a.flex||1} 1 0%`,minWidth:a.minWidth?`${a.minWidth}px`:void 0,minHeight:a.minHeight?`${a.minHeight}px`:void 0,maxWidth:a.maxWidth?`${a.maxWidth}px`:void 0,maxHeight:a.maxHeight?`${a.maxHeight}px`:void 0},children:p.map((u,M)=>{const I=M+1;if(!(I<p.length))return g.jsx(n.Fragment,{children:V(u)},u.id);const ne=$?R.length-1-M:M,ce=$?R.length-1-I:I,B=Math.min(ne,ce);if(Math.max(ne,ce)!==B+1)return g.jsx(n.Fragment,{children:V(u)},u.id);const me=R[B],Te=$&&ne>ce,P=Z(me.id,"horizontal",Te);return g.jsxs(n.Fragment,{children:[V(u),g.jsx(Ee,{direction:"horizontal",onResize:P.onResize,onResizeStart:P.onResizeStart,size:ue})]},u.id)})},a.id);case"column":return g.jsx("div",{className:"react-flex-layout-column",style:{width:a.width?`${a.width}%`:void 0,height:a.height?`${a.height}%`:void 0,flex:`${a.flex||1} 1 0%`,minWidth:a.minWidth?`${a.minWidth}px`:void 0,minHeight:a.minHeight?`${a.minHeight}px`:void 0,maxWidth:a.maxWidth?`${a.maxWidth}px`:void 0,maxHeight:a.maxHeight?`${a.maxHeight}px`:void 0},children:a.children?.map((u,M)=>{const I=M<(a.children?.length||0)-1?Z(u.id,"vertical"):null;return g.jsxs(n.Fragment,{children:[V(u),I&&g.jsx(Ee,{direction:"vertical",onResize:I.onResize,onResizeStart:I.onResizeStart,size:ue})]},u.id)})},a.id);case"tab":return t(a);default:return null}},[te,ue,t,j,ae,ee,Y,de,ge,be,q,re,Q,d,h,Z]);n.useEffect(()=>{!s?.enabled&&N!==null&&A(null)},[s?.enabled,N]),n.useEffect(()=>{s?.enabled&&N!==null&&(L?.global?.direction||"ltr")===N&&A(null)},[s?.enabled,N,L?.global?.direction]);const Ze=n.useMemo(()=>V(O.layout),[V,O.layout]),He={...o,height:"100%",width:"100%"};return s?.enabled&&!k?g.jsx("div",{className:`react-flex-layout ${i}`,style:{...He,display:"flex",alignItems:"center",justifyContent:"center"},children:g.jsx("div",{children:"Loading layout..."})}):g.jsx("div",{className:`react-flex-layout ${i}`,style:He,dir:te,children:Ze})});Ve.displayName="Layout";const Ge=n.memo(Le,(e,t)=>!(e.className!==t.className||e.style!==t.style||e.closeIcon!==t.closeIcon||e.closeButtonClassName!==t.closeButtonClassName||e.index!==t.index||e.onSelect!==t.onSelect||e.onClose!==t.onClose||e.onDragStart!==t.onDragStart||e.onDragEnd!==t.onDragEnd||e.node.id!==t.node.id||e.node.name!==t.node.name));Ge.displayName="MemoizedTab",v.DefaultCloseIcon=Oe,v.Layout=Ve,v.LayoutStorage=$e,v.MemoizedTab=Ge,v.MemoizedTabSet=De,v.ScrollLeftIcon=we,v.ScrollRightIcon=Ie,v.Splitter=Ee,v.Tab=Le,v.TabSet=We,v.addTabToTabset=Xe,v.calculateFlexValues=ze,v.createColumn=Ke,v.createLayoutModel=Pe,v.createLayoutStorage=st,v.createRow=Fe,v.createTab=Be,v.createTabSet=Ne,v.findNodeById=se,v.isLocalStorageAvailable=Ue,v.removeEmptyTabsets=he,v.removeNodeById=ke,v.removeTab=et,v.restoreTab=tt,v.tabExists=nt,v.updateNodeById=G,v.useLayoutStorage=Ye,Object.defineProperty(v,Symbol.toStringTag,{value:"Module"})}));
